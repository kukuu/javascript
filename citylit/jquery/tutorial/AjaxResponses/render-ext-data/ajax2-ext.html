<!DOCTYPE html> 
<html>
<head>
<title>jQuery Ajax Example with JSON Response</title>
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $(':submit').live('click', function () { // This event fires when a button is clicked
            var button = $(this).val();
            $.ajax({ // ajax call starts
                url: 'http://www.lennu.net/demo/jqueryajax/serverside.php', // JQuery loads serverside.php
                data: 'button=' + $(this).val(), // Send value of the clicked button

                dataType: 'json', // Choosing a JSON datatype
                Error: function (msg) {
                    alert(msg.s);
                },
                success: function (data) // Variable data constains the data we get from serverside
                {
                    $('#bookList').html(''); // Clear #bookList div

                    if (button == 'list') { // If clicked buttons value is list, we post every wine
                        for (var i in data.members) {
                            $('#memberList').append('List of members: ' + data.members[i] + '<br/>');
                        }
                        
                    }

                }
            });
            return false; // keeps the page from not refreshing 
        });
    });
</script>

</head>

<body>
	<form method="post" action="">
		<button value="list" type="submit">Get Members!</button>
	</form>
	
	<div id="memberList">
		Loading......
	</div>

</body>
</html>
